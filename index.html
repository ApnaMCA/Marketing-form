<!DOCTYPE html>
<html>
<head>
<title>Join Marketing Team</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body { font-family: Arial; background: #eef2f7; margin: 0; padding: 0; }
.container { max-width: 450px; margin: auto; margin-top: 25px; background: #fff; padding: 25px; border-radius: 15px; box-shadow: 0 4px 18px rgba(0,0,0,0.12); }
h2 { text-align: center; color: #1a73e8; margin-bottom: 20px; }
input, textarea { width:100%; padding:14px; margin:10px 0; border-radius:10px; border:1px solid #ccc; font-size:16px; }
input:focus, textarea:focus { border-color:#1a73e8; outline:none; box-shadow:0 0 5px rgba(26,115,232,0.4); }
button { width:100%; padding:14px; margin-top:10px; background:#1a73e8; border:none; color:white; border-radius:12px; font-size:18px; cursor:pointer; }
button:hover { background:#0f5ac5; }
#successMessage { display:none; text-align:center; margin-top:15px; color: green; font-weight:bold; font-size:16px; }
.file-box { background:#f4f7fb; border:2px dashed #1a73e8; padding:20px; border-radius:12px; text-align:center; color:#1a73e8; font-weight:bold; cursor:pointer; }
#preview { width:100%; margin-top:10px; display:none; border-radius:12px; }
@media(max-width:480px){ .container { margin:15px; padding:20px; } }
</style>
</head>

<body>

<div class="container">
<h2>Join Marketing Team</h2>

<form id="leadForm">
    <label>Full Name</label>
    <input type="text" name="name" id="name" required placeholder="Enter your full name">

    <label>Phone Number</label>
    <input type="text" name="phone" id="phone" required placeholder="Enter phone number">

    <label>City</label>
    <input type="text" name="city" id="city" required placeholder="City">

    <label>Why Join?</label>
    <textarea name="reason" id="reason" required placeholder="Tell something..." rows="3"></textarea>

    <div class="file-box" onclick="document.getElementById('photo').click()">Click to upload photo (optional)</div>
    <input type="file" id="photo" name="photo" accept="image/*" style="display:none">
    <img id="preview" />

    <button type="submit">Submit</button>
</form>

<div id="successMessage">✔️ Your form has been submitted successfully!</div>
</div>

<script>
// Photo Preview
document.getElementById("photo").addEventListener("change", function(event){
    const file = event.target.files[0];
    if(file){
        const reader = new FileReader();
        reader.onload = function(e){
            const preview = document.getElementById("preview");
            preview.src = e.target.result;
            preview.style.display = "block";
        }
        reader.readAsDataURL(file);
    }
});

// Google Sheet Web App URL
const SHEET_URL = "https://script.google.com/macros/s/AKfycbyd4ymm-wx6-kbQY4dLb2Dmct9N5Jnh1d59rvnW25Q2dersadIJBYQklux3sopAbcMxnw/exec";

// WhatsApp Number (91XXXXXXXXXX)
const WHATSAPP = "919977607180";

document.getElementById("leadForm").addEventListener("submit", function(e){
    e.preventDefault();

    let name = document.getElementById("name").value;
    let phone = document.getElementById("phone").value;
    let city = document.getElementById("city").value;
    let reason = document.getElementById("reason").value;

    const file = document.getElementById("photo").files[0];

    // ===== Google Sheet =====
    fetch(SHEET_URL, {
        method: "POST",
        body: JSON.stringify({ name, phone, city, reason })
    }).catch(err => console.error("Sheet Error:", err));

    // ===== WhatsApp =====
    let message = `New Marketing Lead:\nName: ${name}\nPhone: ${phone}\nCity: ${city}\nReason: ${reason}`;
    window.open(`https://wa.me/${WHATSAPP}?text=${encodeURIComponent(message)}`, "_blank");

    // ===== FormSubmit Email =====
    const formData = new FormData();
    formData.append("name", name);
    formData.append("phone", phone);
    formData.append("city", city);
    formData.append("reason", reason);
    if(file) formData.append("photo", file); // optional
    formData.append("_captcha", "false");
    formData.append("_subject", "New Marketing Lead");
    formData.append("_next", window.location.href); // stay on same page

    fetch("https://formsubmit.co/ritiksharmaji139@gmail.com", {
        method: "POST",
        body: formData
    }).then(() => {
        document.getElementById("successMessage").style.display = "block";
        document.getElementById("leadForm").reset();
        document.getElementById("preview").style.display = "none";
    }).catch(err => alert("Error submitting form."));
});
</script>

</body>
</html>
